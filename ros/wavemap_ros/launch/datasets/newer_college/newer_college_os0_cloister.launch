<launch>
  <!-- Wavemap params -->
  <arg name="param_file"
       default="$(find wavemap_ros)/config/ouster_os0.yaml"
       doc="Name of the file from which to read wavemap's server params."/>

  <!-- Dataset params -->
  <arg name="only_first_rosbag"
       default="false"
       doc="If true, replay only the first the rosbag in the dataset. If false, replay everything."/>

  <!-- Select the rosbag paths -->
  <!-- NOTE: Relative paths will be resolved w.r.t. ROS_HOME (default ~/.ros) -->
  <arg if="$(arg only_first_rosbag)" name="rosbag_path"
       value="/home/victor/data/wavemap_experiments/newer_college/dataset/2021-ouster-os0-128-alphasense/collection2/cloister/2021-12-02-10-15-59_0-cloister.bag"/>
  <arg unless="$(arg only_first_rosbag)" name="rosbag_path" value="
../data/wavemap_experiments/newer_college/rosbags/cloister/nc-cloister-undistorted_0.bag
../data/wavemap_experiments/newer_college/rosbags/cloister/nc-cloister-undistorted_1.bag
../data/wavemap_experiments/newer_college/rosbags/cloister/nc-cloister-undistorted_2.bag"/>

  <rosparam command="load"
            file="$(find wavemap_ros)/config/other_packages/fast_lio_ouster_os0.yaml"/>
  <param name="feature_extract_enable" type="bool" value="0"/>
  <param name="point_filter_num" type="int" value="4"/>
  <param name="max_iteration" type="int" value="3"/>
  <param name="filter_size_surf" type="double" value="0.5"/>
  <param name="filter_size_map" type="double" value="0.5"/>
  <param name="cube_side_length" type="double" value="1000"/>
  <param name="runtime_pos_log_enable" type="bool" value="0"/>
  <node pkg="fast_lio" type="fastlio_mapping" name="laserMapping"
        output="screen">
  </node>

  <node pkg="tf" type="static_transform_publisher"
        name="static_tf_odom_camera_init"
        args="0 0 0 0 0 0 1 odom camera_init 100"/>
  <node pkg="tf" type="static_transform_publisher"
        name="static_tf_fast_lio_imu"
        args="0 0 0 0 0 0 1 imu_forward_prop os_imu 100"/>
  <node pkg="tf" type="static_transform_publisher"
        name="static_tf_os_imu_os_sensor"
        args="-0.006253, 0.011775, -0.007645 0 0 0 1 os_imu os_sensor 100"/>

  <!-- Run wavemap -->
  <include file="$(find wavemap_ros)/launch/datasets/dataset_base.launch"
           pass_all_args="true"/>
</launch>
